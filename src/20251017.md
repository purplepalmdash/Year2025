# 20251017
### 1. lxc based(saned)
#### 1.1 container internal forwarding
configure ipp-usb:      

```
# vim /etc/ipp-usb/ipp-usb.conf
[network]
interface = loopback
host-name = localhost,127.0.0.1
ipv6 = disable
```
In a terminal, run ipp-usb:     

```
# ipp-usb
```
#### 1.2 host configuration
Forwarding:     

```
lxc config device add cups-proxy ipp-usb-proxy proxy listen=tcp:127.0.0.1:60001 connect=tcp:127.0.0.1:60001
```
TBD(forwarding to a range).    

airscan configuration:    

```
#  cat /etc/sane.d/airscan.conf
[devices]
my_scanner = http://localhost:60001/eSCL, eSCL
```
since the sane is too old, re-build `libsane-airscan`:     

```
apt install -y libsane-dev
sudo apt-get install -y build-essential libavahi-client-dev libjpeg-dev libpng-dev zlib1g-dev
mkdir ~/airscan-build && cd ~/airscan-build
wget https://github.com/alexpevzner/sane-airscan/archive/refs/tags/0.99.29.tar.gz
tar -xzf 0.99.29.tar.gz
cd sane-airscan-0.99.29/
apt install libgnutls28-dev libtiff-dev libxml2-dev python3-pip
pip3 install --upgrade meson
meson setup build
ninja -C build
sudo ln -s /usr/local/lib/x86_64-linux-gnu/sane/libsane-airscan.so /usr/lib/x86_64-linux-gnu/sane/
sudo ln -s /usr/local/etc/sane.d/dll.d/airscan /etc/sane.d/dll.d/
sudo ln -s /usr/local/lib/x86_64-linux-gnu/sane/libsane-airscan.so.1 /usr/lib/x86_64-linux-gnu/sane/libsane-airscan.so.1
sudo vim  /etc/ld.so.conf.d/usr-local-lib.conf
Add only one line: 
/usr/local/lib
sudo ldconfig

# vim /etc/sane.d/dll.conf
    # ... 文件中已有的其他驱动名 ...
    xerox_mfp
    airscan
# vim /etc/sane.d/net.conf
    localhost
```
