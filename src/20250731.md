# 20250731
### 1. kolla-ansible(x86+aarch64)
Failed via following commands:    

```
TASK [neutron : Running Neutron bootstrap container] *****************************************************************************************************************************************
fatal: [debiankolla -> kolla1]: FAILED! => {"changed": true, "msg": "Container exited with non-zero return code 1", "rc": 1, "stderr": "+ sudo -E kolla_set_configs\nINFO:__main__:Loading config file at /var/lib/kolla/config_files/config.json\nINFO:__main__:Validating config file\nINFO:__main__:Kolla config strategy set to: COPY_ALWAYS\nINFO:__main__:Copying service configuration files\nINFO:__main__:Copying /var/lib/kolla/config_files/neutron.conf to /etc/neutron/neutron.conf\nINFO:__main__:Setting permission for /etc/neutron/neutron.conf\nINFO:__main__:Copying /var/lib/kolla/config_files/neutron_vpnaas.conf to /etc/neutron/neutron_vpnaas.conf\nINFO:__main__:Setting permission for /etc/neutron/neutron_vpnaas.conf\nINFO:__main__:Copying /var/lib/kolla/config_files/ml2_conf.ini to /etc/neutron/plugins/ml2/ml2_conf.ini\nINFO:__main__:Setting permission for /etc/neutron/plugins/ml2/ml2_conf.ini\nINFO:__main__:Copying /var/lib/kolla/config_files/id_rsa to /var/lib/neutron/.ssh/id_rsa\nINFO:__main__:Setting permission for /var/lib/neutron/.ssh/id_rsa\nINFO:__main__:Writing out command to execute\nINFO:__main__:Setting permission for /var/log/kolla/neutron\nINFO:__main__:Setting permission for /var/log/kolla/neutron/dnsmasq.log\nINFO:__main__:Setting permission for /var/log/kolla/neutron/neutron-l3-agent.log\nINFO:__main__:Setting permission for /var/log/kolla/neutron/neutron-metadata-agent.log\nINFO:__main__:Setting permission for /var/log/kolla/neutron/neutron-server.log\nINFO:__main__:Setting permission for /var/log/kolla/neutron/privsep-helper.log\nINFO:__main__:Setting permission for /var/log/kolla/neutron/neutron-dhcp-agent.log\nINFO:__main__:Setting permission for /var/log/kolla/neutron/neutron-openvswitch-agent.log\n++ cat /run_command\n+ CMD='neutron-server --config-file /etc/neutron/neutron.conf  --config-file /etc/neutron/plugins/ml2/ml2_conf.ini --config-file /etc/neutron/neutron_vpnaas.conf '\n+ ARGS=\n+ sudo kolla_copy_cacerts\n+ sudo kolla_install_projects\n+ [[ ! -n '' ]]\n+ . kolla_extend_start\n++ [[ ! -d /var/log/kolla/neutron ]]\n+++ stat -c %a /var/log/kolla/neutron\n++ [[ 2755 != \\7\\5\\5 ]]\n++ chmod 755 /var/log/kolla/neutron\n++ [[ ! debian =~ centos|rocky ]]\n++ /usr/bin/update-alternatives --display iptables\n++ KOLLA_LEGACY_IPTABLES=false\n++ [[ false == \\t\\r\\u\\e ]]\n++ sudo /usr/bin/update-alternatives --auto iptables\n++ sudo /usr/bin/update-alternatives --auto ip6tables\n++ . /usr/local/bin/kolla_neutron_extend_start\n+++ [[ -n 0 ]]\n+++ neutron-db-manage --subproject neutron upgrade head\nINFO  [alembic.runtime.migration] Context impl MySQLImpl.\nINFO  [alembic.runtime.migration] Will assume non-transactional DDL.\nTraceback (most recent call last):\n  File \"/var/lib/kolla/venv/bin/neutron-db-manage\", line 8, in <module>\n    sys.exit(main())\n             ^^^^^^\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/neutron/db/migration/cli.py\", line 668, in main\n    return_val |= bool(CONF.command.func(config, CONF.command.name))\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/neutron/db/migration/cli.py\", line 189, in do_upgrade\n    run_sanity_checks(config, revision)\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/neutron/db/migration/cli.py\", line 651, in run_sanity_checks\n    script_dir.run_env()\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/base.py\", line 582, in run_env\n    util.load_python_file(self.dir, \"env.py\")\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/util/pyfiles.py\", line 95, in load_python_file\n    module = load_module_py(module_id, path)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/util/pyfiles.py\", line 113, in load_module_py\n    spec.loader.exec_module(module)  # type: ignore\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<frozen importlib._bootstrap_external>\", line 940, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/neutron/db/migration/alembic_migrations/env.py\", line 120, in <module>\n    run_migrations_online()\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/neutron/db/migration/alembic_migrations/env.py\", line 114, in run_migrations_online\n    context.run_migrations()\n  File \"<string>\", line 8, in run_migrations\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/runtime/environment.py\", line 946, in run_migrations\n    self.get_context().run_migrations(**kw)\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/runtime/migration.py\", line 616, in run_migrations\n    for step in self._migrations_fn(heads, self):\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/neutron/db/migration/cli.py\", line 641, in check_sanity\n    for script in script_dir.revision_map.iterate_revisions(\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/revision.py\", line 814, in iterate_revisions\n    revisions, heads = fn(\n                       ^^^\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/revision.py\", line 1475, in _collect_upgrade_revisions\n    current_revisions = self.get_revisions(lower)\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/revision.py\", line 542, in get_revisions\n    return sum([self.get_revisions(id_elem) for id_elem in id_], ())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/revision.py\", line 542, in <listcomp>\n    return sum([self.get_revisions(id_elem) for id_elem in id_], ())\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/revision.py\", line 565, in get_revisions\n    return tuple(\n           ^^^^^^\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/revision.py\", line 566, in <genexpr>\n    self._revision_for_ident(rev_id, branch_label)\n  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/revision.py\", line 637, in _revision_for_ident\n    raise ResolutionError(\nalembic.script.revision.ResolutionError: No such revision or branch 'ad80a9f07c5c'\n", "stderr_lines": ["+ sudo -E kolla_set_configs", "INFO:__main__:Loading config file at /var/lib/kolla/config_files/config.json", "INFO:__main__:Validating config file", "INFO:__main__:Kolla config strategy set to: COPY_ALWAYS", "INFO:__main__:Copying service configuration files", "INFO:__main__:Copying /var/lib/kolla/config_files/neutron.conf to /etc/neutron/neutron.conf", "INFO:__main__:Setting permission for /etc/neutron/neutron.conf", "INFO:__main__:Copying /var/lib/kolla/config_files/neutron_vpnaas.conf to /etc/neutron/neutron_vpnaas.conf", "INFO:__main__:Setting permission for /etc/neutron/neutron_vpnaas.conf", "INFO:__main__:Copying /var/lib/kolla/config_files/ml2_conf.ini to /etc/neutron/plugins/ml2/ml2_conf.ini", "INFO:__main__:Setting permission for /etc/neutron/plugins/ml2/ml2_conf.ini", "INFO:__main__:Copying /var/lib/kolla/config_files/id_rsa to /var/lib/neutron/.ssh/id_rsa", "INFO:__main__:Setting permission for /var/lib/neutron/.ssh/id_rsa", "INFO:__main__:Writing out command to execute", "INFO:__main__:Setting permission for /var/log/kolla/neutron", "INFO:__main__:Setting permission for /var/log/kolla/neutron/dnsmasq.log", "INFO:__main__:Setting permission for /var/log/kolla/neutron/neutron-l3-agent.log", "INFO:__main__:Setting permission for /var/log/kolla/neutron/neutron-metadata-agent.log", "INFO:__main__:Setting permission for /var/log/kolla/neutron/neutron-server.log", "INFO:__main__:Setting permission for /var/log/kolla/neutron/privsep-helper.log", "INFO:__main__:Setting permission for /var/log/kolla/neutron/neutron-dhcp-agent.log", "INFO:__main__:Setting permission for /var/log/kolla/neutron/neutron-openvswitch-agent.log", "++ cat /run_command", "+ CMD='neutron-server --config-file /etc/neutron/neutron.conf  --config-file /etc/neutron/plugins/ml2/ml2_conf.ini --config-file /etc/neutron/neutron_vpnaas.conf '", "+ ARGS=", "+ sudo kolla_copy_cacerts", "+ sudo kolla_install_projects", "+ [[ ! -n '' ]]", "+ . kolla_extend_start", "++ [[ ! -d /var/log/kolla/neutron ]]", "+++ stat -c %a /var/log/kolla/neutron", "++ [[ 2755 != \\7\\5\\5 ]]", "++ chmod 755 /var/log/kolla/neutron", "++ [[ ! debian =~ centos|rocky ]]", "++ /usr/bin/update-alternatives --display iptables", "++ KOLLA_LEGACY_IPTABLES=false", "++ [[ false == \\t\\r\\u\\e ]]", "++ sudo /usr/bin/update-alternatives --auto iptables", "++ sudo /usr/bin/update-alternatives --auto ip6tables", "++ . /usr/local/bin/kolla_neutron_extend_start", "+++ [[ -n 0 ]]", "+++ neutron-db-manage --subproject neutron upgrade head", "INFO  [alembic.runtime.migration] Context impl MySQLImpl.", "INFO  [alembic.runtime.migration] Will assume non-transactional DDL.", "Traceback (most recent call last):", "  File \"/var/lib/kolla/venv/bin/neutron-db-manage\", line 8, in <module>", "    sys.exit(main())", "             ^^^^^^", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/neutron/db/migration/cli.py\", line 668, in main", "    return_val |= bool(CONF.command.func(config, CONF.command.name))", "                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/neutron/db/migration/cli.py\", line 189, in do_upgrade", "    run_sanity_checks(config, revision)", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/neutron/db/migration/cli.py\", line 651, in run_sanity_checks", "    script_dir.run_env()", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/base.py\", line 582, in run_env", "    util.load_python_file(self.dir, \"env.py\")", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/util/pyfiles.py\", line 95, in load_python_file", "    module = load_module_py(module_id, path)", "             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/util/pyfiles.py\", line 113, in load_module_py", "    spec.loader.exec_module(module)  # type: ignore", "    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^", "  File \"<frozen importlib._bootstrap_external>\", line 940, in exec_module", "  File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/neutron/db/migration/alembic_migrations/env.py\", line 120, in <module>", "    run_migrations_online()", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/neutron/db/migration/alembic_migrations/env.py\", line 114, in run_migrations_online", "    context.run_migrations()", "  File \"<string>\", line 8, in run_migrations", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/runtime/environment.py\", line 946, in run_migrations", "    self.get_context().run_migrations(**kw)", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/runtime/migration.py\", line 616, in run_migrations", "    for step in self._migrations_fn(heads, self):", "                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/neutron/db/migration/cli.py\", line 641, in check_sanity", "    for script in script_dir.revision_map.iterate_revisions(", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/revision.py\", line 814, in iterate_revisions", "    revisions, heads = fn(", "                       ^^^", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/revision.py\", line 1475, in _collect_upgrade_revisions", "    current_revisions = self.get_revisions(lower)", "                        ^^^^^^^^^^^^^^^^^^^^^^^^^", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/revision.py\", line 542, in get_revisions", "    return sum([self.get_revisions(id_elem) for id_elem in id_], ())", "               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/revision.py\", line 542, in <listcomp>", "    return sum([self.get_revisions(id_elem) for id_elem in id_], ())", "                ^^^^^^^^^^^^^^^^^^^^^^^^^^^", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/revision.py\", line 565, in get_revisions", "    return tuple(", "           ^^^^^^", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/revision.py\", line 566, in <genexpr>", "    self._revision_for_ident(rev_id, branch_label)", "  File \"/var/lib/kolla/venv/lib/python3.11/site-packages/alembic/script/revision.py\", line 637, in _revision_for_ident", "    raise ResolutionError(", "alembic.script.revision.ResolutionError: No such revision or branch 'ad80a9f07c5c'"], "stdout": "iptables - auto mode\n  link best version is /usr/sbin/iptables-nft\n  link currently points to /usr/sbin/iptables-nft\n  link iptables is /usr/sbin/iptables\n  slave iptables-restore is /usr/sbin/iptables-restore\n  slave iptables-save is /usr/sbin/iptables-save\n/usr/sbin/iptables-legacy - priority 10\n  slave iptables-restore: /usr/sbin/iptables-legacy-restore\n  slave iptables-save: /usr/sbin/iptables-legacy-save\n/usr/sbin/iptables-nft - priority 20\n  slave iptables-restore: /usr/sbin/iptables-nft-restore\n  slave iptables-save: /usr/sbin/iptables-nft-save\n", "stdout_lines": ["iptables - auto mode", "  link best version is /usr/sbin/iptables-nft", "  link currently points to /usr/sbin/iptables-nft", "  link iptables is /usr/sbin/iptables", "  slave iptables-restore is /usr/sbin/iptables-restore", "  slave iptables-save is /usr/sbin/iptables-save", "/usr/sbin/iptables-legacy - priority 10", "  slave iptables-restore: /usr/sbin/iptables-legacy-restore", "  slave iptables-save: /usr/sbin/iptables-legacy-save", "/usr/sbin/iptables-nft - priority 20", "  slave iptables-restore: /usr/sbin/iptables-nft-restore", "  slave iptables-save: /usr/sbin/iptables-nft-save"]}

PLAY RECAP ***********************************************************************************************************************************************************************************
debiankolla                : ok=160  changed=25   unreachable=0    failed=1    skipped=114  rescued=0    ignored=0   

```
### 2. kolla-ansible arm64
two nodes verification, deploy OK.    
 
