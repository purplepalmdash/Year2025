# 20250912
### 1. gen10 i7 win7
NB:    

![./images/2025_09_12_08_06_24_959x756.jpg](./images/2025_09_12_08_06_24_959x756.jpg)

black screen after installation.    


![./images/2025_09_12_08_49_15_1027x626.jpg](./images/2025_09_12_08_49_15_1027x626.jpg)

update the i219-v:    

![./images/2025_09_12_08_56_14_446x201.jpg](./images/2025_09_12_08_56_14_446x201.jpg)

Q0 cpu:    

![./images/2025_09_12_09_24_41_879x597.jpg](./images/2025_09_12_09_24_41_879x597.jpg)

Error for code43:    

![./images/2025_09_12_09_25_12_650x568.jpg](./images/2025_09_12_09_25_12_650x568.jpg)


Change cpu to 10400:    

![./images/2025_09_12_09_40_01_756x593.jpg](./images/2025_09_12_09_40_01_756x593.jpg)

Reinstall driver:    

![./images/2025_09_12_09_40_24_415x326.jpg](./images/2025_09_12_09_40_24_415x326.jpg)

![./images/2025_09_12_09_40_39_408x311.jpg](./images/2025_09_12_09_40_39_408x311.jpg)

This time OK:     

![./images/2025_09_12_09_56_42_782x665.jpg](./images/2025_09_12_09_56_42_782x665.jpg)

![./images/2025_09_12_09_57_09_790x666.jpg](./images/2025_09_12_09_57_09_790x666.jpg)

![./images/2025_09_12_09_57_35_740x654.jpg](./images/2025_09_12_09_57_35_740x654.jpg)

![./images/2025_09_12_09_57_48_603x491.jpg](./images/2025_09_12_09_57_48_603x491.jpg)

![./images/2025_09_12_09_58_13_773x674.jpg](./images/2025_09_12_09_58_13_773x674.jpg)

![./images/2025_09_12_09_58_26_723x435.jpg](./images/2025_09_12_09_58_26_723x435.jpg)

### 2. idv verification
gen 10 won't start with gop.    

Ignore, directly verify the win7 vm starting.     

Add first winpe iso:     

![./images/2025_09_12_15_11_46_688x495.jpg](./images/2025_09_12_15_11_46_688x495.jpg)

Add second iso(which contains the real ghost file):     

![./images/2025_09_12_15_12_24_574x401.jpg](./images/2025_09_12_15_12_24_574x401.jpg)

Boot device order:      

![./images/2025_09_12_15_12_44_484x316.jpg](./images/2025_09_12_15_12_44_484x316.jpg)

Add a vnc display with qxl graphical card:    

![./images/2025_09_12_15_13_40_610x396.jpg](./images/2025_09_12_15_13_40_610x396.jpg)

![./images/2025_09_12_15_13_57_566x534.jpg](./images/2025_09_12_15_13_57_566x534.jpg)

快速分区:    

![./images/2025_09_12_15_15_04_584x360.jpg](./images/2025_09_12_15_15_04_584x360.jpg)

2 partitions with esr:     

![./images/2025_09_12_15_16_01_722x528.jpg](./images/2025_09_12_15_16_01_722x528.jpg)

REinstall system:    

![./images/2025_09_12_15_16_33_826x582.jpg](./images/2025_09_12_15_16_33_826x582.jpg)

Selct wim file:    

![./images/2025_09_12_15_16_46_755x497.jpg](./images/2025_09_12_15_16_46_755x497.jpg)

click uefi win7 64 bit logo :    

![./images/2025_09_12_15_17_14_558x107.jpg](./images/2025_09_12_15_17_14_558x107.jpg)

install:    

![./images/2025_09_12_15_17_30_645x474.jpg](./images/2025_09_12_15_17_30_645x474.jpg)

Continue:    

![./images/2025_09_12_15_21_47_852x364.jpg](./images/2025_09_12_15_21_47_852x364.jpg)
Continue:    

![./images/2025_09_12_15_23_30_846x514.jpg](./images/2025_09_12_15_23_30_846x514.jpg)

Open remote desktop and set password for Administrator, then shutdown the vm.     


Add igpu:    

![./images/2025_09_12_15_28_44_577x259.jpg](./images/2025_09_12_15_28_44_577x259.jpg)

and usb controller:    

![./images/2025_09_12_15_29_12_576x422.jpg](./images/2025_09_12_15_29_12_576x422.jpg)


```
<domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'>

      <rom bar='on' file='/usr/share/OVMF/vbios_gvt_uefi.rom'/>

    </memballoon>
  </devices>
    <qemu:commandline>
    <qemu:arg value='-set'/>
    <qemu:arg value='device.hostdev0.x-igd-opregion=on'/>
    <qemu:arg value='-set'/>
    <qemu:arg value='device.hostdev0.x-igd-gms=2'/>
    <qemu:arg value='-set'/>
    <qemu:arg value='device.hostdev0.multifunction=on'/>
  </qemu:commandline>
</domain>

Edit the /etc/libvirt/hooks/qemu for adding win17
```
Don't remove vnc/qxl,    

![./images/2025_09_12_15_37_42_434x255.jpg](./images/2025_09_12_15_37_42_434x255.jpg)

Detect graphical card:    

![./images/2025_09_12_15_38_10_937x433.jpg](./images/2025_09_12_15_38_10_937x433.jpg)

Install driver:    

![./images/2025_09_12_15_38_25_912x212.jpg](./images/2025_09_12_15_38_25_912x212.jpg)

Remove 360 then your uhd 630 would be OK:     

![./images/2025_09_12_15_42_01_692x210.jpg](./images/2025_09_12_15_42_01_692x210.jpg)

![./images/2025_09_12_15_43_37_923x456.jpg](./images/2025_09_12_15_43_37_923x456.jpg)

![./images/2025_09_12_15_43_47_328x151.jpg](./images/2025_09_12_15_43_47_328x151.jpg)

shutdown, remove qxl/vnc.   

not ok.     

![./images/2025_09_12_15_49_54_407x437.jpg](./images/2025_09_12_15_49_54_407x437.jpg)

change qxl to video none:     

```
    <video>
      <model type='none'/>
      <alias name='video0'/>
    </video>
```
Failed(wont' startup)      

Should enable gop part for let this solution perfect.   

### 3. extract and form new gop
Use YunGuJian:     

![./images/2025_09_12_16_39_49_725x523.jpg](./images/2025_09_12_16_39_49_725x523.jpg)

Copy to efi directory:     

![./images/2025_09_12_16_45_22_1459x391.jpg](./images/2025_09_12_16_45_22_1459x391.jpg)

![./images/2025_09_12_16_46_00_948x541.jpg](./images/2025_09_12_16_46_00_948x541.jpg)

Also add enrol :    

![./images/2025_09_12_16_46_43_478x171.jpg](./images/2025_09_12_16_46_43_478x171.jpg)


Copy  win10 pro disk file:    

```
cp -r /run/media/dash/MW/DiskHub/Windows/10/22H2/Pro/a1fe3133 /run/media/dash/VDs 
cd /run/media/dash/VDs/a1fe3133
7z x Windows10-22H2-Pro-L1.7z 

 rm -f Windows10-22H2-Pro-L1.7z
 chmod 777 Windows10-22H2-Pro-L1.vhdx
 cd ..
 cp /run/media/dash/MW/vd.config .
 vim vd.config
``` 

![./images/2025_09_12_17_13_58_1071x600.jpg](./images/2025_09_12_17_13_58_1071x600.jpg)

![./images/2025_09_12_17_23_35_1356x801.jpg](./images/2025_09_12_17_23_35_1356x801.jpg)

![./images/2025_09_12_17_25_16_1006x406.jpg](./images/2025_09_12_17_25_16_1006x406.jpg)

![./images/2025_09_12_17_26_00_612x143.jpg](./images/2025_09_12_17_26_00_612x143.jpg)

Put in the same folder:    

![./images/2025_09_12_17_29_16_560x543.jpg](./images/2025_09_12_17_29_16_560x543.jpg)

UBU.bat:    

![./images/2025_09_12_17_30_38_716x417.jpg](./images/2025_09_12_17_30_38_716x417.jpg)

![./images/2025_09_12_17_31_32_357x363.jpg](./images/2025_09_12_17_31_32_357x363.jpg)

Press 2:    

Press S:   

![./images/2025_09_12_17_32_16_584x257.jpg](./images/2025_09_12_17_32_16_584x257.jpg)

![./images/2025_09_12_17_32_57_403x272.jpg](./images/2025_09_12_17_32_57_403x272.jpg)

Upload this extraced file:   

![./images/2025_09_12_17_34_38_688x444.jpg](./images/2025_09_12_17_34_38_688x444.jpg)

