# 20251204
### 1. nixos's fcitx issue
Solved via:     

```
 nix-shell -p gtk3
    mkdir -p ~/.config/gtk-3.0
    gtk-query-immodules-3.0 > ~/.config/gtk-3.0/immodules.cache
    cat ~/.config/gtk-3.0/immodules.cache | grep fcitx
```
Then:     

```
# vim /etc/nixos/configuration.nix
environment.variables = {
  # 指向你生成的那个“私有藏宝图”
  # 注意：确保这个文件路径是真实存在的，且普通用户有读取权限
  GTK_IM_MODULE_FILE = "/home/dash/.config/gtk-3.0/immodules.cache";
};    
```
Rebuild and then reboot the system. then:    

```
fcitx5-diagnose 2>&1 | tee fcitx5_10.log
cat fcitx5_10.log | grep -i qq
```
Everything will be OK.    
