# 20251225
### 1. nixos update
Run as root:    

```
export http_proxy=socks5h://192.168.1.33:21080
export https_proxy=socks5h://192.168.1.33:21080
export all_proxy=socks5h://192.168.1.33:21080
nix flake update
nixos-rebuild switch --flake . -L
```
After flake switch:      

```
sudo nixos-rebuild switch --option substituters  "https://mirrors.sjtug.sjtu.edu.cn/nix-channels/store"  --show-trace
```
Changes:     

```
# cat /etc/nixos/flake.nix 
......

  inputs = {
    # Stable Nixpkgs for your desktop
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";


    # Home Manager from stable and unstable
    home-manager = {
      url = "github:nix-community/home-manager";
      inputs.nixpkgs.follows = "nixpkgs";
    };
```
### 2. run gemini-cli under nixos
Steps:    

```
gost -L http://:8118 -F socks5://192.168.1.33:21080
export http_proxy=http://127.0.0.1:8118
export https_proxy=http://127.0.0.1:8118
export GEMINI_API_KEY='XXXXXXXX' && export GOOGLE_CLOUD_PROJECT='xxxxxxxxxxxxxxx'
gemini-cli
```

### 3. building kernel
Ubuntu24.04, manually build kernel:    


```
scripts/config --set-str SYSTEM_TRUSTED_KEYS ""
scripts/config --set-str SYSTEM_REVOCATION_KEYS ""
```

Download/patch:     

```
axel https://mirrors.ustc.edu.cn/kernel.org/linux/kernel/v6.x/linux-6.6.117.tar.xz
cd /usr/src
test@nuc11test:/usr/src$ sudo tar xJvf /home/test/linux-6.6.117.tar.xz 
wget -O debooster_series.mbox https://lore.kernel.org/lkml/20251110033232.12538-1-kernellwp@gmail.com/t.mbox


```
