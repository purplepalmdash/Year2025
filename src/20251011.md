# 20251011
### 1. openwrt byobu
Install via:   

```
opkg update
opkg install byobu
opkg install tmux
```
### 2. ipp-usb build(ubuntu20.04)
Build steps:    

```
git clone https://github.com/OpenPrinting/ipp-usb.git
go get -u github.com/jstemmer/gotags
export PATH=$PATH:$(go env GOPATH)/bin
sudo cp /home/test/go/bin/gotags /usr/bin
cd ipp-usb
make
sudo make install
sudo reboot
```

### 3. print test
Via:     

```
sudo lpstat -p -d
打印机 Pantum_M6200NW_series_18523C_USB 目前空闲。从 2025年10月11日 星期六 20时15分24秒 开始启用
无系统默认目标
test@test-Standard-PC-i440FX-PIIX-1996:~$ lp -d  Pantum_M6200NW_series_18523C_USB /etc/nsswitch.conf
请求 ID 为 Pantum_M6200NW_series_18523C_USB-1 (1 个文件)
```
### 4. ubuntu2004server build cups
Steps:    

```
sudo apt-get install build-essential git autoconf libtool pkg-config \
    libavahi-client-dev libgnutls28-dev libjpeg-dev libnss-mdns \
    libpam0g-dev libpng-dev libtiff-dev libusb-1.0-0-dev zlib1g-dev \
    libpoppler-glib-dev libqpdf-dev libfontconfig1-dev libpaper-dev
git clone https://github.com/OpenPrinting/cups.git
cd cups
git checkout v2.4.7
./configure --prefix=/usr/local --enable-libpaper --enable-avah
make -j12
sudo make install
sudo systemctl enable cups.service
sudo reboot

```
此时结果：     

```
test@ubuntu200406server:~$ sudo lpinfo -v
network http
network ipp
network https
network socket
network lpd
network ipps
direct usb://EPSON/L3150%20Series?serial=584141473031373851&interface=1
test@ubuntu200406server:~$ sudo lpstat -p -d
lpstat: No destinations added.
no system default destination
test@ubuntu200406server:~$ sudo lpstat -t
scheduler is running
no system default destination
lpstat: No destinations added.
lpstat: No destinations added.
lpstat: No destinations added.
lpstat: No destinations added.

```
Uncomment `deb-src`, then:     

```
sudo apt update 
sudo apt build-dep cups cups-filters
```
Uninstall previsou installed, re-configure again and install :     

```
 sudo make uninstall
 sudo rm -rf /etc/cups
 sudo rm -f /usr/local/sbin/cupsd
 sudo rm -rf /usr/local/share/cups
 sudo rm -rf /usr/local/lib/cups
 ./configure --prefix=/usr             --sysconfdir=/etc             --localstatedir=/var             --libdir=/usr/lib/x86_64-linux-gnu             --with-rundir=/var/run/cups             --with-logdir=/var/log/cups             --with-docdir=/usr/share/doc/cups             --with-system-groups=lpadmin             --with-dnssd=avahi             --enable-systemd
 make -j12
 sudo make install
```
Failed, reason is the group is not available.     

```
 getent group lpadmin
 groupadd --system lpadmin
 getent group lpadmin
systemctl restart cups
```
