# 20250310
### 1. nixos x86
Get the installation iso:     

```
axel https://mirrors.tuna.tsinghua.edu.cn/nixos-images/nixos-24.11/latest-nixos-gnome-x86_64-linux.iso
axel https://mirrors.tuna.tsinghua.edu.cn/nixos-images/nixos-24.11/latest-nixos-minimal-x86_64-linux.iso; axel https://mirrors.tuna.tsinghua.edu.cn/nixos-images/nixos-24.11/latest-nixos-gnome-aarch64-linux.iso; axel https://mirrors.tuna.tsinghua.edu.cn/nixos-images/nixos-24.11/latest-nixos-minimal-aarch64-linux.iso
```
Write iso to disk.     

Installation cdrom is gnome based:    

![./images/20250310_125349_801x443.jpg](./images/20250310_125349_801x443.jpg)

Open the terminal and change the passwd for nixos user:     

![./images/20250310_125531_309x81.jpg](./images/20250310_125531_309x81.jpg)


```
# cat parted.sh
parted /dev/nvme0n1 -- mklabel gpt
parted /dev/nvme0n1 -- mkpart ESP fat32 1MB 512MB
parted /dev/nvme0n1 -- mkpart primary 512MB -2GB
parted /dev/nvme0n1 -- mkpart swap linux-swap -2GB 100%
parted /dev/nvme0n1 -- set 1 esp on
 
mkfs.fat -F 32 -n boot /dev/nvme0n1p1
mkfs.btrfs -L NIXOS /dev/nvme0n1p2
mkswap -L swap /dev/nvme0n1p3
# ./parted.sh
# lsblk
...
nvme0n1     259:0    0 953.9G  0 disk 
├─nvme0n1p1 259:1    0   487M  0 part 
├─nvme0n1p2 259:2    0 951.5G  0 part 
└─nvme0n1p3 259:3    0   1.9G  0 part
```

### 2. redsocks related
Generate the chnroute.txt:    

```
curl 'http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest' | grep ipv4 | grep CN | awk -F\| '{ printf("%s/%d\n", $4, 32-log($5)/log(2)) }' > chnroute.txt
```

