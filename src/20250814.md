# 20250814
### 1. vxlan under bridge
(Compute)Add sysctl confs:      

```
vim /etc/sysctl.conf
net.bridge.bridge-nf-call-iptables = 1
net.bridge.bridge-nf-call-ip6tables = 1
net.ipv4.conf.all.rp_filter=0
net.ipv4.conf.default.rp_filter=0
sysctl -p

vim /etc/neutron/neutron.conf
[DEFAULT]
...
core_plugin = ml2
service_plugins = router
allow_overlapping_ips = True

vim /etc/neutron/pluings/ml2/linuxbridge_agent.ini
...
[vxlan]
local_ip = 192.168.150.12
enable_vxlan = true
l2_population = True

[agent]
tunnel_types = vxlan
prevent_arp_spoofing = True
...
```
(Controller) enable l3 agent:       

```
vim /etc/neutron/l3_agent.ini
[DEFAULT]
interface_driver = linuxbridge
external_network_bridge =
verbose = True

systemctl enable neutron-l3-agent.service --now
```
(All nodes) add oslo messaging related:       

```
# vim /etc/neutron/neutron.conf
[oslo_messaging_rabbit]
rabbit_host = controller
rabbit_userid = openstack
rabbit_password = openstack

```
Then reboot.   
