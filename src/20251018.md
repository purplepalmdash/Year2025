# 20251018
### 1. lxc based saned(verify)
ubuntu24.04 host machine:     

```
apt install snapd
systemctl disable apparmor
lxd init --auto
```
launch lxc instance:    

```
root@test-Standard-PC-i440FX-PIIX-1996:/home/test# lxc launch ubuntu:24.04 
Launching the instance
Instance name is: next-pheasant                    
root@test-Standard-PC-i440FX-PIIX-1996:/home/test# lxc ls
+---------------+---------+----------------------+----------------------------------------------+-----------+-----------+
|     NAME      |  STATE  |         IPV4         |                     IPV6                     |   TYPE    | SNAPSHOTS |
+---------------+---------+----------------------+----------------------------------------------+-----------+-----------+
| next-pheasant | RUNNING | 10.85.247.211 (eth0) | fd42:c105:7f61:d923:216:3eff:feee:9c0 (eth0) | CONTAINER | 0         |
+---------------+---------+----------------------+----------------------------------------------+-----------+-----------+
root@test-Standard-PC-i440FX-PIIX-1996:/home/test# lxc exec next-pheasant bash
```
host side configuration:     

```
test@test-Standard-PC-i440FX-PIIX-1996:~$ sudo vim /etc/sane.d/saned.conf 
test@test-Standard-PC-i440FX-PIIX-1996:~$ sudo sudo systemctl enable saned.socket
Created symlink /etc/systemd/system/sockets.target.wants/saned.socket → /usr/lib/systemd/system/saned.socket.
test@test-Standard-PC-i440FX-PIIX-1996:~$ sudo sudo systemctl start saned.socket
test@test-Standard-PC-i440FX-PIIX-1996:~$ sudo ufw status
状态：不活动
```
In lxc instance:    

```
apt update -y
apt install -y sane-utils telnet
root@next-pheasant:~# echo "10.85.247.1">>/etc/sane.d/net.conf 
root@next-pheasant:~# telnet 10.85.247.1 6566
Trying 10.85.247.1...
Connected to 10.85.247.1.
Escape character is '^]'.
^]
telnet> 
^CConnection closed by foreign host.
root@next-pheasant:~# scanimage -L
Created directory: /var/lib/snmp/cert_indexes
device `net:10.85.247.1:epsonds:libusb:005:002' is a Epson L3150 Series ESC/I-2
root@next-pheasant:~# scanimage -d 'net:10.85.247.1:epsonds:libusb:005:002' --format=png > 1.png
libpng error: No IDATs written into file
Aborted (core dumped)

```
### 2. ubuntu22.04 host
Create a docker/lxc instance, the same as the above.    

vm based verification:    

```
root@ubuntu200406server:/home/test# echo "192.168.122.1">>/etc/sane.d/net.conf 
root@ubuntu200406server:/home/test# scanimage -L
device `net:192.168.122.1:epsonds:libusb:003:003' is a Epson L3150 Series ESC/I-2
device `net:192.168.122.1:epsonscan2:L3150 Series:584141473031373851:esci2:usb:ES016E:4419' is a EPSON L3150 Series:584141473031373851 flatbed scanner
root@ubuntu200406server:/home/test# scanimage -d 'net:192.168.122.1:epsonds:libusb:003:003' --format=png>1.png
libpng error: No IDATs written into file
Aborted (core dumped)

```
### 3. different driver
After install epsonscan2-bundle-6.7.70.0.x86_64.deb.tar.gz, we will have 2 drivers, use the right driver could use saned     

```
device `epsonscan2:L3150 Series:584141473031373851:esci2:usb:ES016E:4419' is a EPSON L3150 Series:584141473031373851 flatbed scanner

```
scanned via:    

```
scanimage -d 'net:172.17.0.1:epsonscan2:L3150 Series:584141473031373851:esci2:usb:ES016E:4419' --mode Color --format=png>111.png

```
