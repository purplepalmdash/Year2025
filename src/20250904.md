# 20250904
### 1. winserver 2022
Choose `Windows Server 2022 Standard Evalution(Desktop Ex..)`:    

![./images/2025_09_04_09_02_26_635x473.jpg](./images/2025_09_04_09_02_26_635x473.jpg)

Added vfs to vm:    

![./images/2025_09_04_09_53_46_541x495.jpg](./images/2025_09_04_09_53_46_541x495.jpg)

no device driver for vgpu:   

![./images/2025_09_04_09_55_14_708x503.jpg](./images/2025_09_04_09_55_14_708x503.jpg)


![./images/2025_09_04_10_27_26_628x207.jpg](./images/2025_09_04_10_27_26_628x207.jpg)


![./images/2025_09_04_10_27_08_932x675.jpg](./images/2025_09_04_10_27_08_932x675.jpg)

![./images/2025_09_04_10_28_56_702x645.jpg](./images/2025_09_04_10_28_56_702x645.jpg)

Open remote desktop:    

![./images/2025_09_04_10_29_49_511x437.jpg](./images/2025_09_04_10_29_49_511x437.jpg)

Using tigervnc server for setting windows vnc server.   

![./images/2025_09_04_11_48_00_1171x671.jpg](./images/2025_09_04_11_48_00_1171x671.jpg)

### 2. perf related
glmark2:     

![./images/2025_09_04_15_18_05_685x507.jpg](./images/2025_09_04_15_18_05_685x507.jpg)

![./images/2025_09_04_15_21_07_1001x591.jpg](./images/2025_09_04_15_21_07_1001x591.jpg)

![./images/2025_09_04_15_29_03_425x401.jpg](./images/2025_09_04_15_29_03_425x401.jpg)

![./images/2025_09_04_15_33_47_453x396.jpg](./images/2025_09_04_15_33_47_453x396.jpg)

Upgrade to newest kernel:    

![./images/2025_09_04_16_07_34_849x386.jpg](./images/2025_09_04_16_07_34_849x386.jpg)

```
sudo add-apt-repository ppa:cappelikan/ppa
apt update -y
apt install -y mainline
```

![./images/2025_09_04_16_10_12_890x514.jpg](./images/2025_09_04_16_10_12_890x514.jpg)

### 3. build kernel(25.04)

In docker:     

```
apt update
apt install -y vim
 apt install -y flex bison libssl-dev libelf-dev bc gcc automake autoconf libtool make rsync \
            patch wget dpkg-dev libdw-dev git debhelper kmod python-is-python3 gawk
cd /mnt/linux-6.16.4
git config --global --add safe.directory /mnt/linux-6.16.4
git init
git add .
git -c user.name="Your Name" -c user.email="your_email@example.com" commit -m "init commit"


cd /mnt/official
apt download linux-modules-6.14.0-24-generic
ar x linux-modules-6.14.0-24-generic_6.14.0-24_amd64.deb
tar -xvf data.tar.xz
cat ./boot/config-6.14.0-24-generic

cd /mnt/linux-6.16.4/
cp /mnt/official/boot/config-* .config
make menuconfig
## make changes to binder related

sed -i 's/^CONFIG_SYSTEM_TRUSTED_KEYS="debian\/canonical-certs.pem"/CONFIG_SYSTEM_TRUSTED_KEYS=""/' .config
sed -i 's/^CONFIG_SYSTEM_REVOCATION_KEYS="debian\/canonical-revoked-certs.pem"/CONFIG_SYSTEM_REVOCATION_KEYS=""/' .config
time make deb-pkg -j$(nproc)
```
Comparison of different configs generated deb:      

```
First time
-rw-r--r-- 1 root root 9.0M Sep  4 22:16 linux-headers-6.16.4-g5c503d1d0d25-dirty_6.16.4-g5c503d1d0d25-3_amd64.deb
-rw-r--r-- 1 root root  15M Sep  4 22:16 linux-image-6.16.4-g5c503d1d0d25-dirty_6.16.4-g5c503d1d0d25-3_amd64.deb
-rw-r--r-- 1 root root 1.5M Sep  4 22:16 linux-libc-dev_6.16.4-g5c503d1d0d25-3_amd64.deb

Second time(with official ubuntu config)

  LD [M]  net/qrtr/qrtr-smd.ko
  LD [M]  net/qrtr/qrtr-tun.ko
  LD [M]  net/qrtr/qrtr-mhi.ko
  LD [M]  virt/lib/irqbypass.ko
make[3]: *** [debian/rules:80: build-arch] Error 2
dpkg-buildpackage: error: make -f debian/rules binary subprocess returned exit status 2
make[2]: *** [scripts/Makefile.package:126: deb-pkg] Error 2
make[1]: *** [/mnt/linux-6.16.4/Makefile:1635: deb-pkg] Error 2
make: *** [Makefile:248: __sub-make] Error 2

```

